<!--=========================================================================-->
<!-- Copyright (c) 2015 wega Informatik AG | Erick Bastidas-->
<!---->
<!-- This file is part of SOFIA.-->
<!---->
<!-- SOFIA is free software: you can redistribute it and/or modify it under -->
<!-- the terms of the GNU Lesser General Public License as published by the -->
<!-- Free Software Foundation, either version 3 of the License, or (at your -->
<!-- option) any later version.-->
<!---->
<!-- SOFIA is distributed in the hope that it will be useful, but WITHOUT -->
<!-- ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or -->
<!-- FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public -->
<!-- License for more details.-->
<!---->
<!-- You should have received a copy of the GNU Lesser General Public License -->
<!-- along with SOFIA. If not, see <http://www.gnu.org/licenses/>.-->
<!---->
<!--======================================================-->
<!-- Copyright details-->
<!--======================================================-->
<!--   Company: wega Informatik AG-->
<!--   Address: Aeschengraben 20, 4051 Basel, Switzerland-->
<!--   Website: http://www.wega-it.com-->
<!--   Author: Erick Bastidas-->
<!--   Email: ebastidas3@gmail.com-->
<!--=========================================================================-->


<template name="help">
	<div class="container">
		<h1 id="component-title">Help</h1>

		<h1 class="c2 c4"><a id="h.g6bobzwr5fg0"></a></h1><p class="c2 c6"><span class="c0"><a class="c1" href="#h.d69yhtfag1cm">What is SiLA?</a></span></p><p class="c2 c6"><span class="c0"><a class="c1" href="#h.ty3fqxldykw7">What is SOFIA?</a></span></p><p class="c2 c6"><span class="c0"><a class="c1" href="#h.3k2lfpl41t3a">How to add a new device to SOFIA?</a></span></p><p class="c2 c6"><span class="c0"><a class="c1" href="#h.eo0u3qk344ab">Which lab devices are supported?</a></span></p><p class="c2 c6"><span class="c0"><a class="c1" href="#h.52o7v4729ic">Which commands can I execute?</a></span></p><p class="c2 c6"><span class="c0"><a class="c1" href="#h.6bfjuiol9l44">What is an experiment?</a></span></p><p class="c2 c6"><span class="c0"><a class="c1" href="#h.7m925hvkeihm">How to add parameters to a command?</a></span></p><p class="c2 c6"><span class="c0"><a class="c1" href="#h.o8wyqb8qzmmg">What happens when I share my devices?</a></span></p><p class="c2 c6"><span class="c0"><a class="c1" href="#h.1ydv6fwditbz">What happens when I share my experiments? How do experiment runs are shared in real time?</a></span></p><p class="c2 c6"><span class="c0"><a class="c1" href="#h.e7qz6f1pakfp">How an experiment runs inside SOFIA?</a></span></p><p class="c2 c6"><span class="c0"><a class="c1" href="#h.3x7oe3vk3968">Which errors can handle SOFIA?</a></span></p><p class="c2 c6"><span class="c0"><a class="c1" href="#h.69mzu56kpd7v">Why do I get an error message &ldquo;Command not allowed in this state&rdquo; (code 9) and can&rsquo;t run the first command of an experiment?</a></span></p>
		<br />

		<p class="c2 c5"><span></span></p><h4 class="c2 c9"><a id="h.d69yhtfag1cm"></a>
		<br />
		<span>What is SiLA?</span></h4><p class="c2"><span>The SiLA consortium for Standardization in Lab Automation develops and introduces new interface and data management standards allowing rapid integration of lab automation systems. For more info, click </span><span class="c0"><a class="c1" href="http://www.sila-standard.org/about-sila/">here</a></span><span>.</span></p>

		<p class="c2 c5"><span class="c3"></span></p><h4 class="c2 c9"><a id="h.ty3fqxldykw7"></a>
		<br />
		<span>What is SOFIA?</span></h4><p class="c2"><span>SOFIA (</span><span class="c10 c3">S</span><span>iLA-compliant, </span><span class="c10 c3">O</span><span>pen source, </span><span class="c3 c10">F</span><span>ast, </span><span class="c10 c3">I</span><span>ntelligent </span><span class="c10 c3">A</span><span>pplication) is a reference implementation of a </span><span class="c0"><a class="c1" href="http://www.sila-standard.org/standards/pms/">SiLA PMS Consumer</a></span><span>. Project SOFIA promotes the development of open source laboratory automation tools. The general setup of a laboratory inside a local network can be seen in the following diagram:</span></p><p class="c2 c5"><span></span></p><p class="c2"><br /><center><img alt="" src="images/image01.png" style="width: 90%; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></center><br /></p><p class="c2 c5"><span></span></p><p class="c2"><span>SOFIA enable you to connect multiple SiLA-compliant lab devices to your virtual lab, share and discover lab devices in your network, execute SiLA Commands (e.g. move labware with a robot, dispense a liquid) and get data (e.g. temperature, status, duration) from your lab devices, and collaborate and share in real time your experiment runs with any other user in your network.</span></p><p class="c2"><span>SOFIA is an open source, cross-platform project that was developed as a proof-of-concept for the SiLA core principle: the &ldquo;Lab of the Future&rdquo;, a rapid innovation ecosystem connecting devices and people, and exchanging knowledge. SOFIA facilitates the future open source development of more advanced functionalities of a SiLA PMS, such as a scheduler, workflow engine, etc. SOFIA could be potentially developed into an on-demand laboratory services hosted in the cloud, where user can run real-time experiments in remote labs across the globe.</span></p>

		<p class="c2 c5"><span class="c3"></span></p><h4 class="c2 c9"><a id="h.3k2lfpl41t3a"></a>
		<br />
		<span>How to add a new device to SOFIA?</span></h4><p class="c2"><span>Go to &quot;Devices&quot; and add a new SiLA device to your dashboard. By default all new devices are private (only you can see it) but you can share it with your network. The first time you add a new device to your dashboard, a GetDeviceIdentification and a GetStatus SiLA commands are called sequentially to get the information of the device and the current state of the device. When you add a new device, it doesn&rsquo;t mean that your will receive or listen the data, status or events happening in this device. You add a device in order to attach it and create an experiment. After adding SiLA commands and running this experiment, you can listen to the events of this device only on this experiment. Further development of SOFIA, could include an option to &ldquo;only listen&rdquo; events or data transmitted from a device to SOFIA (via other user&rsquo;s experiments), without being the creator of an experiment.</span></p>

		<p class="c2 c5"><span class="c3"></span></p><h4 class="c2 c9"><a id="h.eo0u3qk344ab"></a>
		<br />
		<span>Which lab devices are supported?</span></h4><p class="c2"><span>SOFIA implements the SiLA-compliant devices described in the version 0.97 of the SiLA Command Dictionary. The list of devices could be easily modified to support previous or later versions. The list of supported devices is the following:</span></p>
		<table style="width:35%">
		  <tr>
		    <th>SiLA Class ID</th>
		    <th>Device Name</th> 
		  </tr>
			<tr><td>0</td><td>Basic suppliance</td></tr>
			<tr><td>1</td><td>Dispenser</td></tr>
			<tr><td>2</td><td>Pipettor</td></tr>
			<tr><td>3</td><td>Washer</td></tr>
			<tr><td>4</td><td>Reader / Imager</td></tr>
			<tr><td>5</td><td>Shaker</td></tr>
			<tr><td>6</td><td>Stacker</td></tr>
			<tr><td>7</td><td>Hotel</td></tr>
			<tr><td>8</td><td>Incubator</td></tr>
			<tr><td>9</td><td>Lid Handler</td></tr>
			<tr><td>10</td><td>Sealer</td></tr>
			<tr><td>11</td><td>Peeler</td></tr>
			<tr><td>12</td><td>Piercer</td></tr>
			<tr><td>13</td><td>Capper / Decapper</td></tr>
			<tr><td>14</td><td>Code Reader</td></tr>
			<tr><td>15</td><td>Code Labeler</td></tr>
			<tr><td>16</td><td>RFID Reader/Writer</td></tr>
			<tr><td>17</td><td>Centrifuge</td></tr>
			<tr><td>18</td><td>Conveyor Belt</td></tr>
			<tr><td>19</td><td>Robot (1-6Axis)</td></tr>
			<tr><td>20</td><td>Heating/cooling Unit</td></tr>
			<tr><td>21</td><td>Analytical Instrument</td></tr>
			<tr><td>22</td><td>Syringe Pump</td></tr>
			<tr><td>23</td><td>Valve</td></tr>
			<tr><td>24</td><td>Evaporator</td></tr>
			<tr><td>25</td><td>Balance</td></tr>
			<tr><td>26</td><td>Pump (liquid)</td></tr>
			<tr><td>27</td><td>Vacuum Pump</td></tr>
			<tr><td>28</td><td>Acoustic dispenser</td></tr>
			<tr><td>29</td><td>Tube Picher / Puncher</td></tr>
			<tr><td>30</td><td>PCR cycler</td></tr>
			<tr><td>31</td><td>Camera</td></tr>
			<tr><td>901</td><td>Digital IO</td></tr>
			<tr><td>902</td><td>Analog IO</td></tr>
			<tr><td>903</td><td>Motor Controller</td></tr>
			<tr><td>100</td><td>Custom use device classes</td></tr>
		</table>
		<br />
		<p class="c2"><span>The current version of SOFIA has not yet fully tested all the devices and some misbehavior &nbsp;might occur on some devices. Future development could include complete tests or verification on SiLA devices compliance.</span></p><p class="c2 c5"><span class="c3"></span></p>

		<p class="c2 c5"><span class="c3"></span></p><h4 class="c2 c9"><a id="h.52o7v4729ic"></a>
		<br />
		<span>Which commands can I execute?</span></h4><p class="c2 c5"><span class="c3"></span></p><p class="c2"><span>The list of available commands are loaded dynamically depending on the device(s) attached to an experiment. The list of commands shown are the mandatory, required and optional commands specified in the SiLA Command Dictionary. Notice that not all the device must implement the optional commands, and therefore the optional ones that are not implemented by the SiLA provider will not run in SOFIA either. SOFIA implements only version 0.97 of the SiLA Command Dictionary, but this could be easily modified to support previous or later versions. There&rsquo;s no support of device-specific commands in SOFIA in the current version. The list of supported commands is the following:</span></p><p class="c2 c5"><span></span></p>

		<p class="c2"><span class="c8">Mandatory commands:</span></p>

		<ul>
		<li>Abort</li>
		<li>DoContinue</li>
		<li>GetDeviceIdentification</li>
		<li>GetStatus</li>
		<li>Initialize</li>
		<li>LockDevice</li>
		<li>Pause</li>
		<li>Reset</li>
		<li>UnlockDevice</li>
		</ul>

		<p class="c2"><span class="c8">Required or optional commands:</span></p>


		<ul>
		<li>ActivateStopper</li>
		<li>AddLid</li>
		<li>Aspirate</li>
		<li>AttachStack</li>
		<li>CalculateComplexPosition</li>
		<li>CalculatePositionID</li>
		<li>Cap</li>
		<li>CloseDoor</li>
		<li>CloseGripper</li>
		<li>Decap</li>
		<li>Delay</li>
		<li>Dispense</li>
		<li>DispenseByColumn</li>
		<li>DownStack</li>
		<li>EjectTip</li>
		<li>EmptyTubes</li>
		<li>Evaporate</li>
		<li>ExecuteMethod</li>
		<li>GetConfiguration</li>
		<li>GetInventory</li>
		<li>GetLabware</li>
		<li>GetParameters</li>
		<li>GetTemperature</li>
		<li>GetTip</li>
		<li>GoToValvePosition</li>
		<li>LabwareDelivered</li>
		<li>LabwareRemoved</li>
		<li>Home</li>
		<li>MeasureSample</li>
		<li>MoveAbsolute</li>
		<li>MoveEndless</li>
		<li>MoveLabware</li>
		<li>MoveToPosition</li>
		<li>OpenDoor</li>
		<li>OpenGripper</li>
		<li>Peel</li>
		<li>Pierce</li>
		<li>PrepareForInput</li>
		<li>PrepareForOutput</li>
		<li>Prime</li>
		<li>Pump</li>
		<li>PutLabware</li>
		<li>ReadAllAnalogInputs</li>
		<li>ReadAllDigitalInputs</li>
		<li>ReadAnalogInput</li>
		<li>ReadCode</li>
		<li>ReadMultipleCodes</li>
		<li>ReadDigitalInput</li>
		<li>ReadNamedAnalogInput</li>
		<li>ReadNamedDigitalInput</li>
		<li>ReadPlate</li>
		<li>ReadWell</li>
		<li>RegisterStatusEventURL</li>
		<li>ReleaseStack</li>
		<li>RemoveLid</li>
		<li>ResetDigitalOutput</li>
		<li>ResetNamedDigitalOutput</li>
		<li>RetireveByPositionId</li>
		<li>RetrieveByLabwareIdentifier</li>
		<li>Rinse</li>
		<li>ScanInventory</li>
		<li>Seal</li>
		<li>SetAnalogOutput</li>
		<li>SetConfiguration</li>
		<li>SetDigitalOutput</li>
		<li>SetNamedAnalogOutput</li>
		<li>SetNamedDigitalOutput</li>
		<li>SetLanguage</li>
		<li>SetParameters</li>
		<li>SetTag</li>
		<li>SetTemperature</li>
		<li>Shake</li>
		<li>Spin</li>
		<li>StartTempControl </li>
		<li>StopMethod</li>
		<li>StopMotion</li>
		<li>StopTemperatureControl</li>
		<li>StoreAtPosition</li>
		<li>StoreImage</li>
		<li>StoreImageSeries</li>
		<li>Tare</li>
		<li>TeachPosition</li>
		<li>TransferLiquid</li>
		<li>TransferTube</li>
		<li>UnRegisterStatusEventReceiver</li>
		<li>Upstack</li>
		<li>Wash</li>
		<li>Weigh</li>
		<li>WriteCode</li>
		<li>WriteCodeSeries</li>
		</ul>


		<p class="c2"><span>Note: The current version of SOFIA has not yet fully tested all the commands and some misbehavior might occur on some commands. The commands &ldquo;RegisterStatusEventURL&rdquo; is not implemented yet. Further development of SOFIA, could include an option to &ldquo;only listen&rdquo; using this command.</span></p>

		<h4 class="c2 c9"><a id="h.6bfjuiol9l44"></a>
		<br />
		<span>What is an experiment?</span></h4><p class="c2"><span>An experiment in SOFIA is a list of SiLA commands (and parameters) to be executed sequentially.</span></p><p class="c2 c5"><span></span></p>

		<h4 class="c2 c7"><a id="h.7m925hvkeihm"></a>
			<br />
			<span>How to add parameters to a command?</span></h4><p class="c2"><span>The required parameters for a SiLA command can be found in the </span><span class="c0">SiLA Command Dictionary</span><span>&nbsp;and in the </span><span class="c0">SiLA Device Control &amp; Data Interfaces Specifications</span><span>&nbsp;(DCDIS) in SiLA&rsquo;s download webpage </span><span class="c0"><a class="c1" href="http://www.sila-standard.org/downloads/">http://www.sila-standard.org/downloads/</a></span><span>. </span></p><p class="c2 c5"><span></span></p><p class="c2"><span>All the required commands have to be added in the following format as text:</span></p><p class="c2"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameter1:value1,parameter2:value2,parameter3:value3...</span></p><p class="c2 c5"><span></span></p><p class="c2"><span>For example, to add a command &ldquo;DispenseByColumn&rdquo;, the required commands are volume, startColumn, and stopColumn. The parameters text in SOFIA should be similar to this:</span></p><p class="c2"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;volume:25,startColumn:2,stopColumn:4</span></p><p class="c2 c5"><span></span></p><p class="c2"><span>To add a command &ldquo;Shake&rdquo;, a command that requires a time parameter, the parameters text in SOFIA should be similar to this:</span></p><p class="c2"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shakeDuration:PT2S</span></p><p class="c2 c5"><span></span></p><p class="c2"><span>See &ldquo;section 2.1.1.2 Data Types&rdquo; of the DCDIS for the more information of SiLA time format values. Parameter&rsquo;s values as XML files have not been fully tested yet in SOFIA, as they could potentially be redefined in next releases of the DCDIS.</span></p>

		<p class="c2 c5"><span></span></p><h4 class="c2 c9"><a id="h.o8wyqb8qzmmg"></a>
		<br />
		<span>What happens when I share my devices?</span></h4><p class="c2"><span>When you share your device, all the users registered in your network can see your shared device in their dashboard. They cannot edit or delete it, nor make it private again. They can use (and temporarily lock) it to run their own experiments.</span></p>

		<p class="c2 c5"><span></span></p><h4 class="c2 c7"><a id="h.1ydv6fwditbz"></a>
		<br />
		<span>What happens when I share my experiments? How do experiment runs are shared in real time?</span></h4><p class="c2"><span>When you share an experiment, all the users registered in your network can see your shared experiment in their dashboard. They cannot edit or delete it, nor make it private again. They can edit the SiLA commands inside this experiment and they can run it as well. All the users able to see the experiment details, can also see in real time the execution of an experiment when it started running. This means that a user can run an experiment and all the users that can access this experiment will see at the same time and receive in their screens all the events and data produced by the SiLA commands called in a device.</span></p>

		<p class="c2 c5"><span></span></p><h4 class="c2 c9"><a id="h.e7qz6f1pakfp"></a>
		<br />
		<span>How an experiment runs inside SOFIA?</span></h4><p class="c2"><span>Every command has to finish successfully (SiLA return code 1 or 3 based in the DCDIS) in order to the next command starts running. If a SiLA error occurs is returned by a device, the experiment stops. The following diagram shows how a SiLA command is handled by SOFIA.</span></p><p class="c2 c5"><span></span></p><p class="c2"><br /><center><img alt="" src="images/image00.png" style="width: 90%; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></center><br /></p><p class="c2 c5"><span></span></p><p class="c2 c5"><span></span></p><p class="c2"><span>When an asynchronous command (e.g. dispense, MoveLabware) is sent to SOFIA by a user, SOFIA&rsquo;s Controller sends a request for this SiLA command to the device via SOAP messages. The device returns immediately a response to the Controller (as specified in the DCDIS) only to tell if the command has been accepted or denied (because of some error) by the device. The device depending on its state could queue the command for later execution or start the execution of the command if the state of the device is idle. The user on his screen can see that the command is &ldquo;Queued&rdquo; in his experiment. The device then start the execution of the command (e.g. dispense a liquid, move labware with a robot, etc), and after it finishes executing this command, the device sends a message (a request SOAP message) to SOFIA&rsquo;s Async Commands Listener to tell the execution of the command completed successfully or had some error. The Async Commands Listener send back a response to the device with a SiLAReturnValue (as specified by the DCDIS). If no error occurred, SOFIA&rsquo;s controller continue to execute the next command of the experiment sequentially until the last one.</span></p><p class="c2 c5"><span></span></p><p class="c2"><span>SiLA synchronous commands runs similar to the previous process detailed but they don&rsquo;t wait a request to the Async Commands Listener, before continue to execute the next command in line of the experiment.</span></p><p class="c2 c5"><span></span></p><p class="c2"><span>Further development could support parallel execution of commands in different devices.</span></p><p class="c2 c5"><span></span></p><p class="c2"><span>A sample of an experiment can be seen in the following video (recorded in Actelion's lab in Allschwil, Switzerland):</span></p>

		<div class="videowrapper"><iframe src="https://www.youtube.com/embed/G2OMKYlPQ0c?rel=0" frameborder="0" allowfullscreen></iframe></div>

		<p class="c2 c5"><span></span></p><h4 class="c2 c9"><a id="h.3x7oe3vk3968"></a>
		<br />
		<span>Which errors can handle SOFIA?</span></h4><p class="c2"><span>None in the current version. Further developments could include error handling.</span></p>

		<p class="c2 c5"><span></span></p><h4 class="c2 c7"><a id="h.69mzu56kpd7v"></a>
		<br />
		<span>Why do I get an error message &ldquo;Command not allowed in this state&rdquo; (code 9) and can&rsquo;t run the first command of an experiment?</span></h4><p class="c2"><span>According to SiLA technical specifications, to run a command like &quot;Dispense&quot;, the status of the device has to be &quot;idle&quot; beforehand. When a device is first powered on it&rsquo;s status is &quot;startup&quot;. If a device is powered off and powered on again, the status of the device is again &quot;startup&quot;. If the device is not &quot;idle&quot;, create a new experiment and run 2 commands in this order: &quot;Reset&quot; and &quot;Initialize&quot;. This will change the status of the device from &quot;startup&quot; to &quot;standby&quot; and to &quot;idle&quot; finally. You can check the status of the device at anytime clicking in the refresh button next to every device. For more information about the status of a device check the &ldquo;state machine&rdquo; chapter in the DCDIS.</span></p>


	</div>
</template>
